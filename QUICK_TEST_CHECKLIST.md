# 🧪 V2.1 快速测试清单

## 📋 基础功能测试

### 1. 页面加载
- [ ] 访问 http://localhost:3000
- [ ] 检查页面正常显示
- [ ] 步骤指示器显示"步骤1"
- [ ] 上传区域正常显示

### 2. 照片上传
- [ ] 点击上传照片
- [ ] 拖拽上传照片
- [ ] 预览图正常显示
- [ ] 无错误提示

### 3. 人脸检测（正面照）
- [ ] 上传正面照片
- [ ] 显示"人脸检测成功"
- [ ] 右侧显示裁剪预览
- [ ] 进度条正常显示

### 4. 人脸检测（侧脸/无人脸）
- [ ] 上传侧脸照片
- [ ] 显示"未检测到人脸，使用全身照"
- [ ] 仍可继续操作
- [ ] 无错误中断

### 5. 扩展比例调节
- [ ] 拖动滑块
- [ ] 比例数值更新
- [ ] 范围：1.2x - 2.5x
- [ ] 默认值：1.8x

### 6. 背景移除
- [ ] 开关可以切换
- [ ] 开启后处理时间更长
- [ ] 进度条显示处理进度
- [ ] 生成透明背景（如果支持）

### 7. 步骤切换
- [ ] 点击"下一步"进入步骤2
- [ ] 步骤指示器更新为"步骤2"
- [ ] 处理中时按钮禁用
- [ ] 未上传照片时按钮禁用

---

## 🎯 详细测试场景

### 场景A：理想情况
```
输入：清晰的正面照片（800×800, JPG, 2MB）
操作：
1. 上传照片
2. 等待检测完成
3. 查看预览效果
4. 点击下一步

预期：
✅ 人脸检测成功
✅ 裁剪效果良好
✅ 处理时间 < 3秒
✅ 顺利进入步骤2
```

### 场景B：侧脸照片
```
输入：侧脸照片
操作：
1. 上传照片
2. 查看提示信息

预期：
⚠️ 显示"未检测到人脸"
✅ 使用全身照
✅ 可以继续操作
```

### 场景C：启用背景移除
```
输入：简单背景照片
操作：
1. 上传照片
2. 开启背景移除
3. 等待处理

预期：
✅ 进度条显示
✅ 处理时间 5-10秒
✅ 生成抠图效果
```

### 场景D：大文件
```
输入：超大照片（>5MB）
操作：
1. 上传照片
2. 尝试背景移除

预期：
⚠️ 可能跳过背景移除
✅ 提示文件过大
✅ 基本功能正常
```

### 场景E：移动端
```
设备：手机/平板
操作：
1. 访问页面
2. 上传照片
3. 调整参数
4. 点击下一步

预期：
✅ 布局自适应
✅ 按钮固定在底部
✅ 触控操作流畅
✅ 预览正常显示
```

---

## 🔍 检查要点

### 控制台检查
打开浏览器开发者工具（F12）：

```javascript
// 应该看到的日志
✅ Face detection models loaded
✅ Face detected: {...}
✅ Background removed successfully

// 不应该看到的错误
❌ Cannot find module
❌ Failed to load models
❌ Uncaught TypeError
```

### 网络请求
检查Network标签：

```
✅ /models/tiny_face_detector_model-weights_manifest.json (200)
✅ /models/tiny_face_detector_model-shard1 (200)
✅ /models/face_landmark_68_model-weights_manifest.json (200)
✅ /models/face_landmark_68_model-shard1 (200)
```

### 性能检查
```
首次加载：
- 模型加载：1-2秒
- 页面渲染：< 1秒

人脸检测：
- 检测时间：0.5-2秒
- 裁剪时间：< 0.5秒

背景移除：
- 处理时间：3-10秒
- 内存占用：合理范围
```

---

## 🐛 常见问题排查

### 问题1：模型加载失败
```
错误信息：Failed to load models
检查：
1. public/models/ 目录是否存在
2. 模型文件是否完整（4个文件）
3. 网络连接是否正常

解决：
npm run download-models
```

### 问题2：人脸检测无响应
```
现象：上传照片后一直转圈
检查：
1. 控制台是否有错误
2. 模型是否加载成功
3. 照片格式是否支持

解决：
1. 刷新页面
2. 重新上传
3. 更换照片
```

### 问题3：页面空白
```
现象：访问页面显示空白
检查：
1. 开发服务器是否运行
2. 控制台是否有构建错误
3. 端口是否被占用

解决：
1. npm run dev
2. 清除 .next 缓存
3. 重新构建
```

### 问题4：背景移除失败
```
现象：启用后没有效果
检查：
1. 文件大小是否 > 5MB
2. 控制台错误信息
3. 浏览器兼容性

解决：
1. 压缩照片
2. 关闭该功能
3. 更换浏览器
```

---

## 📱 移动端特别检查

### iOS Safari
- [ ] 照片上传
- [ ] 触控滑动
- [ ] 按钮固定
- [ ] 预览显示

### Android Chrome
- [ ] 照片上传
- [ ] 触控操作
- [ ] 性能表现
- [ ] 预览效果

### 微信浏览器
- [ ] 页面访问
- [ ] 基本功能
- [ ] 照片上传
- [ ] 预览显示

---

## ✅ 验收标准

### 必须通过
- ✅ 正面照片人脸检测成功率 > 80%
- ✅ 侧脸/无人脸照片降级方案正常
- ✅ 处理速度合理（< 5秒不含背景移除）
- ✅ 无阻断性错误
- ✅ 移动端基本功能正常

### 建议通过
- ✅ 背景移除效果良好
- ✅ 大文件处理不崩溃
- ✅ 移动端体验流畅
- ✅ 各浏览器兼容

### 可接受问题
- ⚠️ 复杂背景抠图效果一般
- ⚠️ 超大文件处理慢
- ⚠️ 老旧浏览器不支持
- ⚠️ 某些边缘场景检测失败

---

## 🎯 测试报告模板

```markdown
## 测试环境
- 浏览器：Chrome 120
- 操作系统：Windows 11
- 测试时间：2025-10-15

## 测试结果
- 基础功能：✅ 通过
- 人脸检测：✅ 通过
- 背景移除：✅ 通过
- 移动端：⚠️ 部分通过

## 发现问题
1. [高优先级] 描述问题...
2. [中优先级] 描述问题...
3. [低优先级] 描述问题...

## 建议
- 建议1...
- 建议2...
```

---

## 🚀 下一步测试

完成基础测试后，测试其他步骤：

### 步骤2：选择单词
- [ ] 单词库切换
- [ ] 单词选择
- [ ] 卡片预览
- [ ] 头像拖动

### 步骤3：选择尺寸
- [ ] 尺寸切换
- [ ] A4预览
- [ ] 缩放功能
- [ ] 导出按钮

---

**💡 建议：先用一张清晰的正面照片完整走一遍流程，确保基本功能正常！**

