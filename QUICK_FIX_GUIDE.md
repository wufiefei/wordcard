# 🔧 快速修复指南

## Internal Server Error 解决方案

### 问题原因
- Next.js缓存损坏
- 多个Node进程冲突
- 热更新失败

### 修复步骤

**已完成的操作**：
1. ✅ 停止所有Node进程
2. ✅ 清理.next缓存
3. ✅ 重新启动服务器

**当前状态**：
- 服务器正在重新启动
- 请等待15-20秒

---

## 🚀 启动后的测试步骤

1. **访问页面**
   ```
   http://localhost:3000
   ```

2. **上传照片测试**
   - 选择一张清晰照片
   - 观察进度条
   - 等待自动抠图完成

3. **首次使用提示**
   ```
   第一次上传会比较慢（5-10秒）
   因为需要下载AI模型（~5MB）
   请耐心等待
   ```

4. **后续使用**
   ```
   模型下载后会缓存
   后续抠图只需3-5秒
   ```

---

## 🎯 自动抠图功能说明

### 工作流程
```
上传照片
  ↓
准备中... (0-10%)
  ↓
智能抠图中... (10-90%)
  - 首次：下载模型 + 处理
  - 后续：直接处理
  ↓
处理完成... (90-100%)
  ↓
显示抠图结果 ✅
```

### 进度显示
- **0-10%**: "准备中..."
- **10-90%**: "智能抠图中... XX%"
- **90-100%**: "处理完成..."

### 完成后
- 左侧显示："✅ 自动抠图完成"
- 右侧预览抠图效果
- 可选操作：
  - 满意 → 点击"下一步"
  - 不满意 → 点击"编辑图片"

---

## 💡 使用建议

### 最佳照片要求
1. **清晰度**：越清晰越好
2. **背景**：简单背景效果更佳
3. **人物**：正面照片最佳
4. **光线**：充足均匀
5. **大小**：1-5MB之间

### 如果抠图效果不好
1. 点击"编辑图片"
2. 使用擦除工具移除多余部分
3. 使用还原工具补回细节
4. 点击"完成"保存

---

## ⚠️ 常见问题

### Q1: 一直显示"准备中..."
**A**: 
- 首次使用需要下载模型
- 请等待5-10秒
- 检查网络连接

### Q2: 提示错误
**A**:
- 刷新页面重试
- 检查图片格式（JPG/PNG）
- 压缩图片大小

### Q3: 抠图失败
**A**:
- 会自动降级使用原图
- 可以手动使用编辑器抠图
- 不影响后续流程

---

## 🔄 如果还有问题

### 完全重置
```powershell
# 1. 停止服务器（Ctrl+C）

# 2. 清理所有缓存
Remove-Item -Recurse -Force .next
Remove-Item -Recurse -Force node_modules

# 3. 重新安装
npm install

# 4. 重新启动
npm run dev
```

### 检查浏览器
- 清除浏览器缓存
- 硬刷新页面（Ctrl+Shift+R）
- 尝试无痕模式
- 更换浏览器测试

---

## ✅ 验证服务器正常

### 检查命令
```powershell
# 检查端口
netstat -ano | findstr :3000

# 测试访问
curl http://localhost:3000
```

### 正常输出
```
应该看到：
- 端口3000在监听
- HTTP 200响应
```

---

**🎊 服务器启动完成后，请刷新浏览器页面！**

